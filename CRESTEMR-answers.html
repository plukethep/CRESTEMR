<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-0.9.377">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Peter EJ Kemp">
<title>CRESTEM-R ANSWERS</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>
<script src="CRESTEMR-answers_files/libs/clipboard/clipboard.min.js"></script><script src="CRESTEMR-answers_files/libs/quarto-html/quarto.js"></script><script src="CRESTEMR-answers_files/libs/quarto-html/popper.min.js"></script><script src="CRESTEMR-answers_files/libs/quarto-html/tippy.umd.min.js"></script><script src="CRESTEMR-answers_files/libs/quarto-html/anchor.min.js"></script><link href="CRESTEMR-answers_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link id="quarto-text-highlighting-styles" href="CRESTEMR-answers_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet">
<script src="CRESTEMR-answers_files/libs/bootstrap/bootstrap.min.js"></script><link href="CRESTEMR-answers_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="CRESTEMR-answers_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="css/CRESTEMR.css">
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction"> <span class="header-section-number">1</span> Introduction</a></li>
  <li><a href="#getting-set-up" id="toc-getting-set-up" class="nav-link" data-scroll-target="#getting-set-up"> <span class="header-section-number">2</span> Getting set up</a></li>
  <li>
<a href="#starting-to-code" id="toc-starting-to-code" class="nav-link" data-scroll-target="#starting-to-code"> <span class="header-section-number">3</span> Starting to code</a>
  <ul class="collapse">
<li><a href="#objects-and-instructions" id="toc-objects-and-instructions" class="nav-link" data-scroll-target="#objects-and-instructions"> <span class="header-section-number">3.1</span> Objects and instructions</a></li>
  <li><a href="#naming-objects" id="toc-naming-objects" class="nav-link" data-scroll-target="#naming-objects"> <span class="header-section-number">3.2</span> Naming objects</a></li>
  <li><a href="#comments" id="toc-comments" class="nav-link" data-scroll-target="#comments"> <span class="header-section-number">3.3</span> Comments</a></li>
  <li><a href="#data-types" id="toc-data-types" class="nav-link" data-scroll-target="#data-types"> <span class="header-section-number">3.4</span> Data types</a></li>
  <li><a href="#stitching-things-together" id="toc-stitching-things-together" class="nav-link" data-scroll-target="#stitching-things-together"> <span class="header-section-number">3.5</span> Stitching things together</a></li>
  <li><a href="#vectors" id="toc-vectors" class="nav-link" data-scroll-target="#vectors"> <span class="header-section-number">3.6</span> Vectors</a></li>
  <li><a href="#summary-questions" id="toc-summary-questions" class="nav-link" data-scroll-target="#summary-questions"> <span class="header-section-number">3.7</span> Summary questions</a></li>
  </ul>
</li>
  <li>
<a href="#the-tidyverse" id="toc-the-tidyverse" class="nav-link" data-scroll-target="#the-tidyverse"> <span class="header-section-number">4</span> The tidyverse</a>
  <ul class="collapse">
<li><a href="#loading-data" id="toc-loading-data" class="nav-link" data-scroll-target="#loading-data"> <span class="header-section-number">4.1</span> Loading data</a></li>
  <li>
<a href="#piping" id="toc-piping" class="nav-link" data-scroll-target="#piping"> <span class="header-section-number">4.2</span> Piping</a>
  <ul class="collapse">
<li><a href="#group-and-summarise" id="toc-group-and-summarise" class="nav-link" data-scroll-target="#group-and-summarise"> <span class="header-section-number">4.2.1</span> Group and summarise</a></li>
  <li><a href="#select-filter-and-mutate" id="toc-select-filter-and-mutate" class="nav-link" data-scroll-target="#select-filter-and-mutate"> <span class="header-section-number">4.2.2</span> Select, filter and mutate</a></li>
  <li><a href="#renaming-columns" id="toc-renaming-columns" class="nav-link" data-scroll-target="#renaming-columns"> <span class="header-section-number">4.2.3</span> Renaming columns</a></li>
  <li><a href="#arranging-results" id="toc-arranging-results" class="nav-link" data-scroll-target="#arranging-results"> <span class="header-section-number">4.2.4</span> Arranging results</a></li>
  <li><a href="#questions" id="toc-questions" class="nav-link" data-scroll-target="#questions"> <span class="header-section-number">4.2.5</span> Questions</a></li>
  </ul>
</li>
  <li><a href="#joing-tables" id="toc-joing-tables" class="nav-link" data-scroll-target="#joing-tables"> <span class="header-section-number">4.3</span> Joing tables</a></li>
  <li><a href="#saving-data" id="toc-saving-data" class="nav-link" data-scroll-target="#saving-data"> <span class="header-section-number">4.4</span> Saving data</a></li>
  <li><a href="#summary-questions-1" id="toc-summary-questions-1" class="nav-link" data-scroll-target="#summary-questions-1"> <span class="header-section-number">4.5</span> Summary questions</a></li>
  </ul>
</li>
  <li>
<a href="#graphing" id="toc-graphing" class="nav-link" data-scroll-target="#graphing"> <span class="header-section-number">5</span> Graphing</a>
  <ul class="collapse">
<li><a href="#exporting-plots" id="toc-exporting-plots" class="nav-link" data-scroll-target="#exporting-plots"> <span class="header-section-number">5.1</span> exporting plots</a></li>
  </ul>
</li>
  <li><a href="#statistical-analysis-in-r" id="toc-statistical-analysis-in-r" class="nav-link" data-scroll-target="#statistical-analysis-in-r"> <span class="header-section-number">6</span> Statistical analysis in R</a></li>
  <li><a href="#pretty-tables" id="toc-pretty-tables" class="nav-link" data-scroll-target="#pretty-tables"> <span class="header-section-number">7</span> Pretty tables</a></li>
  </ul></nav>
</div>
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<h1 class="title">CRESTEM-R ANSWERS</h1>
<p class="subtitle lead">an introduction to analysing educational data</p>
</div>





<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Peter EJ Kemp </p>
          </div>
  </div>
    
    
  </div>
  

</header><div class="cell">

</div>
<section id="introduction" class="level1" data-number="1"><h1 data-number="1">
<span class="header-section-number">1</span> Introduction</h1>
</section><section id="getting-set-up" class="level1" data-number="2"><h1 data-number="2">
<span class="header-section-number">2</span> Getting set up</h1>
</section><section id="starting-to-code" class="level1" data-number="3"><h1 data-number="3">
<span class="header-section-number">3</span> Starting to code</h1>
<section id="objects-and-instructions" class="level2" data-number="3.1"><h2 data-number="3.1" class="anchored" data-anchor-id="objects-and-instructions">
<span class="header-section-number">3.1</span> Objects and instructions</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>HoursInYear <span class="ot">&lt;-</span> <span class="dv">365</span> <span class="sc">*</span> <span class="dv">24</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">print</span>(HoursInYear) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 8760</code></pre>
</div>
</div>
<div class="question">
<p>Type the two examples above into your RStudio script file and check that they work. Adapt them to say your full name and give the number of <code>MinutesInADay</code></p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>myname <span class="ot">&lt;-</span> <span class="st">"Sheila"</span></span>
<span id="cb3-2"><a href="#cb3-2"></a><span class="fu">print</span>(myname)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Sheila"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>MinutesInADay <span class="ot">&lt;-</span> <span class="dv">24</span> <span class="sc">*</span> <span class="dv">60</span></span>
<span id="cb5-2"><a href="#cb5-2"></a><span class="fu">print</span>(MinutesInADay) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1440</code></pre>
</div>
</div>
<div class="question">
<p>what are the outputs of the following code snippets/what do they do? One of the examples might not output anything, why is that? Type the code into your script file to check your answers:</p>
<p>code example 1</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>rabbits <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb7-2"><a href="#cb7-2"></a>feet <span class="ot">&lt;-</span> <span class="dv">4</span></span>
<span id="cb7-3"><a href="#cb7-3"></a></span>
<span id="cb7-4"><a href="#cb7-4"></a>totalfeet <span class="ot">&lt;-</span> rabbits <span class="sc">*</span> feet</span>
<span id="cb7-5"><a href="#cb7-5"></a><span class="fu">print</span>(totalfeet)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 200</code></pre>
</div>
</div>
<p>code example 2</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>p <span class="ot">&lt;-</span> <span class="fl">3.14</span> <span class="sc">-</span> <span class="fl">0.14</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>r <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb9-3"><a href="#cb9-3"></a></span>
<span id="cb9-4"><a href="#cb9-4"></a><span class="fu">print</span>(p <span class="sc">*</span> r<span class="sc">^</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 75</code></pre>
</div>
</div>
<p>code example 3</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>tax <span class="ot">&lt;-</span> <span class="fl">17.5</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>price <span class="ot">&lt;-</span> <span class="fl">4.50</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>sales <span class="ot">&lt;-</span> <span class="dv">128</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>tax <span class="ot">&lt;-</span> <span class="dv">20</span></span>
<span id="cb11-5"><a href="#cb11-5"></a></span>
<span id="cb11-6"><a href="#cb11-6"></a>income <span class="ot">&lt;-</span> (sales <span class="sc">*</span> price) <span class="sc">*</span> (<span class="dv">1</span> <span class="sc">+</span> (tax<span class="sc">/</span><span class="dv">100</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The above code doesn’t output anything as there isn’t a print statement, let’s add one:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a><span class="fu">print</span>(income)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 691.2</code></pre>
</div>
</div>
</div>
</section><section id="naming-objects" class="level2" data-number="3.2"><h2 data-number="3.2" class="anchored" data-anchor-id="naming-objects">
<span class="header-section-number">3.2</span> Naming objects</h2>
<div class="question">
<p>Which of these are valid R object names:</p>
<ul>
<li>
<code>my_Number</code> - VALID</li>
<li>
<code>my-Number</code> - INVALID as it uses a hyphen</li>
<li>
<code>myNumber!</code> - INVALID as it uses an exclaimation mark</li>
<li>
<code>first name</code>- INVALID as it uses a space</li>
<li>
<code>FIRSTname</code> - VALID</li>
<li>
<code>i</code> - VALID</li>
<li>
<code>3names</code> - INVALID as it starts with a number</li>
<li>
<code>names3</code> - VALID</li>
</ul>
</div>
</section><section id="comments" class="level2" data-number="3.3"><h2 data-number="3.3" class="anchored" data-anchor-id="comments">
<span class="header-section-number">3.3</span> Comments</h2>
<div class="question">
<p>Using only the comment <code>#</code> symbol, can you edit this code to <em>not</em> charge tax on top of the <code>total_sales</code>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="co"># this prints the total cost of sales</span></span>
<span id="cb14-2"><a href="#cb14-2"></a>total_sales <span class="ot">&lt;-</span> <span class="dv">4000</span></span>
<span id="cb14-3"><a href="#cb14-3"></a><span class="co"># tax &lt;- total_sales * 0.2</span></span>
<span id="cb14-4"><a href="#cb14-4"></a></span>
<span id="cb14-5"><a href="#cb14-5"></a>cost <span class="ot">&lt;-</span> total_sales <span class="co">#+ tax</span></span>
<span id="cb14-6"><a href="#cb14-6"></a><span class="fu">print</span>(cost)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4000</code></pre>
</div>
</div>
<p>commenting out line 3 isn’t absolutely necessary as the comment on line 5 does the job of snipping out the tax from the calcuation</p>
</div>
<div class="question">
<p>Julie is exactly 40 years old today, this means that she has been alive for <code>40 * 12</code> or <code>480</code> months. How many weeks has she been alive for?</p>
<ul>
<li>use a sensible variable name.</li>
<li>add a comment to explain what you have done,</li>
<li>
<code><a href="https://rdrr.io/r/base/print.html">print( )</a></code> the answer,</li>
<li>[Extension] try and work out how many seconds old Julie is.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>years <span class="ot">&lt;-</span> <span class="dv">40</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>weeks <span class="ot">&lt;-</span> years <span class="sc">*</span> <span class="dv">52</span> <span class="co"># multiple years by the number of weeks in a year</span></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="fu">print</span>(weeks)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2080</code></pre>
</div>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="co"># I could use the weeks object here, but use 365 days instead to better avoid rounding errors</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>seconds <span class="ot">&lt;-</span> years <span class="sc">*</span> <span class="dv">365</span> <span class="sc">*</span> <span class="dv">24</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">*</span> <span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section><section id="data-types" class="level2" data-number="3.4"><h2 data-number="3.4" class="anchored" data-anchor-id="data-types">
<span class="header-section-number">3.4</span> Data types</h2>
<div class="question">
<ol type="1">
<li>Can you spot the error(s) in this code and fix them so it outputs: “July is month 7”?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>month <span class="ot">&lt;-</span> <span class="st">"July"</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>order <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb19-3"><a href="#cb19-3"></a>  </span>
<span id="cb19-4"><a href="#cb19-4"></a><span class="fu">print</span>(month)</span>
<span id="cb19-5"><a href="#cb19-5"></a><span class="fu">Print</span>(<span class="st">"is"</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a><span class="fu">print</span>(month)</span>
<span id="cb19-7"><a href="#cb19-7"></a><span class="fu">print</span>(<span class="st">"order"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>month <span class="ot">&lt;-</span> <span class="st">"July"</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>order <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  </span>
<span id="cb20-4"><a href="#cb20-4"></a><span class="fu">print</span>(month)    </span>
<span id="cb20-5"><a href="#cb20-5"></a><span class="fu">print</span>(<span class="st">"is"</span>) <span class="co">#1 print needs a lowercase p</span></span>
<span id="cb20-6"><a href="#cb20-6"></a><span class="fu">print</span>(<span class="st">"month"</span>)    <span class="co">#2 month is a character not an object, use speech marks</span></span>
<span id="cb20-7"><a href="#cb20-7"></a><span class="fu">print</span>(order)    <span class="co">#3 order is an object, not a character, so drop the speech marks</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "July"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "is"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "month"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Can you spot the error(s) in this code and fix it?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>a <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>b <span class="ot">&lt;-</span> <span class="st">"8"</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>c <span class="sc">&lt;</span> <span class="sc">-</span> <span class="dv">3</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>  </span>
<span id="cb25-5"><a href="#cb25-5"></a><span class="fu">print</span>(a <span class="sc">+</span> b <span class="sc">+</span> c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>a <span class="ot">&lt;-</span> <span class="dv">7</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>b <span class="ot">&lt;-</span> <span class="dv">8</span> <span class="co">#1 b is numeric so drop the speech marks</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span> <span class="co">#2 the arrow needs to be together, remove the space</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  </span>
<span id="cb26-5"><a href="#cb26-5"></a><span class="fu">print</span>(a <span class="sc">+</span> b <span class="sc">+</span> c)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 18</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Can you spot the error(s) in this code and fix it?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a>pass mark <span class="ot">&lt;-</span> <span class="dv">50</span> </span>
<span id="cb28-2"><a href="#cb28-2"></a>exam_grade <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb28-3"><a href="#cb28-3"></a></span>
<span id="cb28-4"><a href="#cb28-4"></a><span class="co"># did the student pass?</span></span>
<span id="cb28-5"><a href="#cb28-5"></a><span class="fu">print</span>(exam_grade <span class="sc">&gt;</span> pass_mark)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a>pass_mark <span class="ot">&lt;-</span> <span class="dv">50</span> <span class="co">#1 the variable name can't have any spaces</span></span>
<span id="cb29-2"><a href="#cb29-2"></a>exam_grade <span class="ot">&lt;-</span> <span class="dv">50</span></span>
<span id="cb29-3"><a href="#cb29-3"></a></span>
<span id="cb29-4"><a href="#cb29-4"></a><span class="co"># did the student pass?</span></span>
<span id="cb29-5"><a href="#cb29-5"></a><span class="fu">print</span>(exam_grade <span class="sc">&gt;=</span> pass_mark) <span class="co">#2 this needs to be &gt;= as they had a passing grade</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
</section><section id="stitching-things-together" class="level2" data-number="3.5"><h2 data-number="3.5" class="anchored" data-anchor-id="stitching-things-together">
<span class="header-section-number">3.5</span> Stitching things together</h2>
<div class="question">
<ol type="1">
<li>What are the <em>five</em> errors in this code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>place <span class="ot">&lt;-</span> <span class="st">"Nantwich</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="st">pop &lt;- 17,424</span></span>
<span id="cb31-3"><a href="#cb31-3"></a></span>
<span id="cb31-4"><a href="#cb31-4"></a><span class="st">Print(paste(place "</span>has a population of<span class="st">" , "</span>pop<span class="st">"))</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>place <span class="ot">&lt;-</span> <span class="st">"Nantwich"</span> <span class="co">#1 missing speech mark</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>pop <span class="ot">&lt;-</span> <span class="dv">17424</span>       <span class="co">#2 numbers can't have commas</span></span>
<span id="cb32-3"><a href="#cb32-3"></a></span>
<span id="cb32-4"><a href="#cb32-4"></a><span class="fu">print</span>(<span class="fu">paste</span>(place, <span class="st">"has a population of"</span> , pop))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Nantwich has a population of 17424"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="co">#3 missing comma after place</span></span>
<span id="cb34-2"><a href="#cb34-2"></a><span class="co">#4 pop is an object, remove the speech marks</span></span>
<span id="cb34-3"><a href="#cb34-3"></a><span class="co">#5 capital P in print should be lower case</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="2" type="1">
<li>Write code that stores <code>length</code> and <code>width</code> of a rectangular table and calculates and prints the total <code>area</code> in the format:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a>length <span class="ot">&lt;-</span> <span class="dv">10</span></span>
<span id="cb35-2"><a href="#cb35-2"></a>width  <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb35-3"><a href="#cb35-3"></a>area <span class="ot">&lt;-</span> length <span class="sc">*</span> width</span>
<span id="cb35-4"><a href="#cb35-4"></a></span>
<span id="cb35-5"><a href="#cb35-5"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"table length:"</span>, length, <span class="st">"table width:"</span>, width, <span class="st">"area ="</span>, area ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "table length: 10 table width: 5 area = 50"</code></pre>
</div>
</div>
</div>
</section><section id="vectors" class="level2" data-number="3.6"><h2 data-number="3.6" class="anchored" data-anchor-id="vectors">
<span class="header-section-number">3.6</span> Vectors</h2>
<div class="question">
<ol type="1">
<li>Can you spot the <em>four</em> problems with this code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>nums <span class="ot">&lt;-</span> <span class="fu">v</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="st">"3"</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">2</span>,<span class="dv">2</span>)</span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="fu">sum</span>(nums)</span>
<span id="cb37-3"><a href="#cb37-3"></a><span class="fu">mean</span>(nums)</span>
<span id="cb37-4"><a href="#cb37-4"></a><span class="co"># return a vector of all numbers greater than 2</span></span>
<span id="cb37-5"><a href="#cb37-5"></a><span class="fu">nums</span>(nums <span class="sc">&gt;=</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a>nums <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">7</span>,<span class="dv">2</span>,<span class="dv">2</span>) </span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="co">#1 a vector is declared using c(), not v()</span></span>
<span id="cb38-3"><a href="#cb38-3"></a><span class="co">#2 3 should be numeric, so no need for speech marks</span></span>
<span id="cb38-4"><a href="#cb38-4"></a><span class="co"># (though technically R would do this conversion for you?!)</span></span>
<span id="cb38-5"><a href="#cb38-5"></a></span>
<span id="cb38-6"><a href="#cb38-6"></a><span class="fu">sum</span>(nums)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 21</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a><span class="fu">mean</span>(nums)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a><span class="co"># return a vector of all numbers greater than 2</span></span>
<span id="cb42-2"><a href="#cb42-2"></a>nums[nums <span class="sc">&gt;=</span> <span class="dv">2</span>] <span class="co">#3 to pick items from another vector, use square brackets</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 3 4 7 2 2</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Create a vector to store the number of glasses of water you have drunk for each day in the last 7 days. Work out:
<ul>
<li>the average number of glasses for the week,</li>
<li>the total number of glasses,</li>
<li>the number of days where you drank less than 2 glasses (feel free to replace water with your own tipple: wine, coffee, tea, coke, etc.)</li>
</ul>
</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>glasses <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">6</span>,<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">0</span>)</span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="fu">mean</span>(glasses)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2.5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a><span class="fu">sum</span>(glasses)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 15</code></pre>
</div>
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">sum</span>(glasses <span class="sc">&lt;</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Using the vectors below, create a program that will find out the average grade for females taking English:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>english_grade <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>)</span>
<span id="cb50-2"><a href="#cb50-2"></a>genders <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a>english_grade <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">8</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">6</span>,<span class="dv">9</span>)</span>
<span id="cb51-2"><a href="#cb51-2"></a>genders <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>, <span class="st">"F"</span>, <span class="st">"M"</span>)</span>
<span id="cb51-3"><a href="#cb51-3"></a><span class="fu">mean</span>(english_grade[genders <span class="sc">==</span> <span class="st">"F"</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5.333333</code></pre>
</div>
</div>
</div>
</section><section id="summary-questions" class="level2" data-number="3.7"><h2 data-number="3.7" class="anchored" data-anchor-id="summary-questions">
<span class="header-section-number">3.7</span> Summary questions</h2>
<div class="question">
<ol type="1">
<li>Describe three datatypes that you can use in your program?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a><span class="fu">print</span>(<span class="st">"numeric for numbers"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric for numbers"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a><span class="fu">print</span>(<span class="st">"character for words/strings"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character for words/strings"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a><span class="fu">print</span>(<span class="st">"logical for boolean values"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical for boolean values"</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>What are two reasons that you might use comments?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a><span class="fu">print</span>(<span class="st">"to make your code more understandable"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "to make your code more understandable"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a><span class="fu">print</span>(<span class="st">"to disable bits of code that you might want to reenable later"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "to disable bits of code that you might want to reenable later"</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>
<p>Which object names are valid?</p>
<ul>
<li>my_name</li>
<li>your name</li>
<li>our-name</li>
<li>THYname</li>
</ul>
</li>
</ol>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] "my_name - VALID"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "your name - INVALID use of space"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "our-name - INVALID use of hyphen"</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "THYname - VALID"</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Can you spot the <em>seven</em> errors in this code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb67"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb67-1"><a href="#cb67-1"></a>stu1 <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb67-2"><a href="#cb67-2"></a>2stu <span class="ot">&lt;-</span> <span class="dv">13</span></span>
<span id="cb67-3"><a href="#cb67-3"></a>stu3 <span class="ot">&lt;-</span> <span class="st">"15"</span></span>
<span id="cb67-4"><a href="#cb67-4"></a></span>
<span id="cb67-5"><a href="#cb67-5"></a><span class="co"># now work out the average of the ages</span></span>
<span id="cb67-6"><a href="#cb67-6"></a>avg <span class="sc">&lt;</span> <span class="sc">-</span> (Stu1 <span class="sc">+</span> stu2 <span class="sc">+</span> stu3) <span class="sc">/</span> <span class="dv">3</span></span>
<span id="cb67-7"><a href="#cb67-7"></a><span class="fu">print</span>(<span class="st">"students are, on average, "</span> <span class="sc">+</span> avg,  years old)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a>stu1 <span class="ot">&lt;-</span> <span class="dv">12</span></span>
<span id="cb68-2"><a href="#cb68-2"></a>stu2 <span class="ot">&lt;-</span> <span class="dv">13</span> <span class="co">#1 2stu to stu2, cannot start name with a number</span></span>
<span id="cb68-3"><a href="#cb68-3"></a>stu3 <span class="ot">&lt;-</span> <span class="dv">15</span> <span class="co">#2 no need for speech marks on "15"</span></span>
<span id="cb68-4"><a href="#cb68-4"></a></span>
<span id="cb68-5"><a href="#cb68-5"></a><span class="co"># now work out the average of the ages</span></span>
<span id="cb68-6"><a href="#cb68-6"></a>avg <span class="ot">&lt;-</span> (stu1 <span class="sc">+</span> stu2 <span class="sc">+</span> stu3) <span class="sc">/</span> <span class="dv">3</span> <span class="co">#3 broken arrow &lt; - #4 capital letter on Stu1</span></span>
<span id="cb68-7"><a href="#cb68-7"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"students are, on average, "</span>, avg, <span class="st">"years old"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "students are, on average,  13.3333333333333 years old"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="co">#5 missing paste() </span></span>
<span id="cb70-2"><a href="#cb70-2"></a><span class="co">#6 + should be comma ,</span></span>
<span id="cb70-3"><a href="#cb70-3"></a><span class="co">#7 missing speech marks on years old</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="5" type="1">
<li>Write a program that stores objects for your <code>firstName</code> and <code>secondName.</code> Make it print out:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb71"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb71-1"><a href="#cb71-1"></a><span class="co"># declare separate objects to store the first and last name</span></span>
<span id="cb71-2"><a href="#cb71-2"></a>firstName <span class="ot">&lt;-</span> <span class="st">"Mike"</span></span>
<span id="cb71-3"><a href="#cb71-3"></a>secondName <span class="ot">&lt;-</span> <span class="st">"Smith"</span></span>
<span id="cb71-4"><a href="#cb71-4"></a></span>
<span id="cb71-5"><a href="#cb71-5"></a><span class="co"># i use the paste here to concatenate the name parts together</span></span>
<span id="cb71-6"><a href="#cb71-6"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"Hello"</span>, firstName, secondName))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hello Mike Smith"</code></pre>
</div>
</div>
<ol start="6" type="1">
<li><p>Add comments to the code from the previous question explain how it works</p></li>
<li><p>Calculate the number of seconds in a week and print out <code>there are [num] seconds in a week</code>, where [num] is a number</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb73"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb73-1"><a href="#cb73-1"></a>seconds <span class="ot">&lt;-</span> <span class="dv">7</span> <span class="sc">*</span> <span class="dv">24</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">*</span> <span class="dv">60</span></span>
<span id="cb73-2"><a href="#cb73-2"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">"there are"</span>, seconds, <span class="st">"in a week"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "there are 604800 in a week"</code></pre>
</div>
</div>
<ol start="8" type="1">
<li>[Extension] You have been given the vectors below that store distances and times between locations in England.
<ul>
<li>convert all the times in seconds</li>
<li>convert the distances into kilometres</li>
<li>find times shorter than 3 hours</li>
<li>calculate and print the origin and destination of trips over 150 miles</li>
</ul>
</li>
</ol>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb75"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb75-1"><a href="#cb75-1"></a>origin <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Manchester"</span>, <span class="st">"London"</span>, <span class="st">"Cardiff"</span>, <span class="st">"Colchester"</span>, <span class="st">"Canterbury"</span>)</span>
<span id="cb75-2"><a href="#cb75-2"></a>dest <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"London"</span>, <span class="st">"Cardiff"</span>, <span class="st">"Colchester"</span>, <span class="st">"Canterbury"</span>, <span class="st">"Manchester"</span>)</span>
<span id="cb75-3"><a href="#cb75-3"></a>time <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">258</span>, <span class="dv">233</span>, <span class="dv">253</span>, <span class="dv">131</span>, <span class="dv">266</span>) <span class="co"># in minutes</span></span>
<span id="cb75-4"><a href="#cb75-4"></a>dist <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">200</span>, <span class="dv">149</span>, <span class="dv">224</span>, <span class="dv">94</span>, <span class="dv">308</span>)  <span class="co"># in miles</span></span>
<span id="cb75-5"><a href="#cb75-5"></a></span>
<span id="cb75-6"><a href="#cb75-6"></a>time <span class="sc">*</span> <span class="dv">60</span> <span class="sc">*</span> <span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 928800 838800 910800 471600 957600</code></pre>
</div>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>dist <span class="sc">*</span> <span class="fl">1.6</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 320.0 238.4 358.4 150.4 492.8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a>time <span class="sc">&lt;</span> <span class="dv">180</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE FALSE FALSE  TRUE FALSE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb81"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb81-1"><a href="#cb81-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(origin[dist <span class="sc">&gt;</span> <span class="dv">150</span>], dest[dist <span class="sc">&gt;</span> <span class="dv">150</span>]))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Manchester London"     "Cardiff Colchester"    "Canterbury Manchester"</code></pre>
</div>
</div>
<ol start="9" type="1">
<li>[Extension] Calculate the number of seconds since 1970.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb83"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb83-1"><a href="#cb83-1"></a>this_year <span class="ot">&lt;-</span> <span class="dv">2022</span></span>
<span id="cb83-2"><a href="#cb83-2"></a>focus_year <span class="ot">&lt;-</span> <span class="dv">1970</span></span>
<span id="cb83-3"><a href="#cb83-3"></a></span>
<span id="cb83-4"><a href="#cb83-4"></a>(this_year <span class="sc">-</span> focus_year) <span class="sc">*</span> <span class="dv">365</span> <span class="sc">*</span> <span class="dv">24</span> <span class="sc">*</span> <span class="dv">60</span> <span class="sc">*</span> <span class="dv">60</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1639872000</code></pre>
</div>
</div>
<ol start="10" type="1">
<li>[Extension] find the <code>min</code>imum and <code>max</code>imum times and distances in Question 8, above.</li>
</ol>
</div>
</section></section><section id="the-tidyverse" class="level1" data-number="4"><h1 data-number="4">
<span class="header-section-number">4</span> The tidyverse</h1>
<section id="loading-data" class="level2" data-number="4.1"><h2 data-number="4.1" class="anchored" data-anchor-id="loading-data">
<span class="header-section-number">4.1</span> Loading data</h2>
<div class="question">
<ol type="1">
<li>Can you spot the <em>five</em> errors in this code:</li>
</ol>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb85"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb85-1"><a href="#cb85-1"></a><span class="fu">library</span>(tidyverse) <span class="co">#1 spelling mistake on tidyverse</span></span>
<span id="cb85-2"><a href="#cb85-2"></a></span>
<span id="cb85-3"><a href="#cb85-3"></a><span class="fu">setwd</span>(<span class="st">"C:/Users/Peter/Google Drive/Kings/R intro/code"</span>) <span class="co">#2 the first slash was a forward slash</span></span>
<span id="cb85-4"><a href="#cb85-4"></a>results <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"dfe_data.xlsx"</span>, <span class="st">"Results"</span>) <span class="co">#3 missing speech mark from Results</span></span>
<span id="cb85-5"><a href="#cb85-5"></a>schools <span class="ot">&lt;-</span> <span class="fu">read_excel</span>(<span class="st">"dfe_data.xlsx"</span>, <span class="st">"Schools"</span>) <span class="co">#4 missing tail on the assignment arrow &lt;-</span></span>
<span id="cb85-6"><a href="#cb85-6"></a></span>
<span id="cb85-7"><a href="#cb85-7"></a><span class="fu">sum</span>(results<span class="sc">$</span>Entries, <span class="at">na.rm=</span><span class="cn">TRUE</span>) <span class="co">#5 £ used instead of a dollar # 6 missing na.rm</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>What is the largest <code>Total_students</code> size?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb87"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1"></a><span class="fu">max</span>(results<span class="sc">$</span>Total_students)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 563</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>How many different types of subject <code>Description</code> are there?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb89"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb89-1"><a href="#cb89-1"></a><span class="fu">unique</span>(results<span class="sc">$</span>Description)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  [1] "Additional Mathematics FSMQ"                            
  [2] "Modern Greek"                                           
  [3] "Art &amp; Design (Fine Art)"                                
  [4] "Chinese"                                                
  [5] "Design &amp; Technology"                                    
  [6] "English Language"                                       
  [7] "English Literature"                                     
  [8] "French"                                                 
  [9] "Geography"                                              
 [10] "German"                                                 
 [11] "Classical Greek"                                        
 [12] "Latin"                                                  
 [13] "Physics"                                                
 [14] "Religious Studies"                                      
 [15] "Drama &amp; Theatre Studies"                                
 [16] "Physical Education/Sports Studies"                      
 [17] "Music performance: Group"                               
 [18] "Classical Civilisation"                                 
 [19] "Mathematics"                                            
 [20] "Russian"                                                
 [21] "Business Studies"                                       
 [22] "Sports Studies"                                         
 [23] "Arabic"                                                 
 [24] "Biology"                                                
 [25] "Chemistry"                                              
 [26] "Computer Studies/Computing"                             
 [27] "Economics"                                              
 [28] "Applied Engineering"                                    
 [29] "D&amp;T Food Technology"                                    
 [30] "History"                                                
 [31] "Italian"                                                
 [32] "Music"                                                  
 [33] "Art &amp; Design (Photography)"                             
 [34] "Sociology"                                              
 [35] "Spanish"                                                
 [36] "Science: Double Award"                                  
 [37] "Persian"                                                
 [38] "Portuguese"                                             
 [39] "Turkish"                                                
 [40] "Health Studies"                                         
 [41] "Speech &amp; Drama"                                         
 [42] "Art &amp; Design"                                           
 [43] "Business Studies:Single"                                
 [44] "Social Science: Citizenship"                            
 [45] "Media/Film/Tv Studies"                                  
 [46] "Engineering Studies"                                    
 [47] "Applied ICT"                                            
 [48] "Dance"                                                  
 [49] "Art Techniques/Practical Art"                           
 [50] "Tourism"                                                
 [51] "Small Business Management"                              
 [52] "Music Technology (Electronic)"                          
 [53] "Music Studies (General)"                                
 [54] "Film Studies"                                           
 [55] "Art &amp; Design (3d Studies)"                              
 [56] "Polish"                                                 
 [57] "Psychology"                                             
 [58] "Computer Architecture / Systems"                        
 [59] "Personal Finance"                                       
 [60] "Art &amp; Design (Textiles)"                                
 [61] "Hairdressing Services"                                  
 [62] "Ancient History"                                        
 [63] "Personal Health"                                        
 [64] "Gujarati"                                               
 [65] "Dance: General"                                         
 [66] "Sports / Movement Science"                              
 [67] "Food Technology"                                        
 [68] "Hospitality / Catering Studies"                         
 [69] "Childcare Skills"                                       
 [70] "Punjabi"                                                
 [71] "Statistics"                                             
 [72] "Urdu"                                                   
 [73] "Computer Appreciation / Introduction"                   
 [74] "Multimedia"                                             
 [75] "Building / Construction Operations (General / Combined)"
 [76] "Modern Hebrew"                                          
 [77] "Other Classical Languages"                              
 [78] "Japanese"                                               
 [79] "Manufacturing Engineering"                              
 [80] "Animal Care (Non-Agricultural)"                         
 [81] "Bengali"                                                
 [82] "Art &amp; Design (Graphics)"                                
 [83] "Astronomy"                                              
 [84] "Retailing"                                              
 [85] "Engineering Design"                                     
 [86] "Electronics"                                            
 [87] "Town Planning"                                          
 [88] "Beauty Care / Services"                                 
 [89] "Theory of Music"                                        
 [90] "Computing and IT Advanced Technician"                   
 [91] "Interactive Video"                                      
 [92] "D&amp;T Textiles Technology"                                
 [93] "Graphic Design"                                         
 [94] "Maintenance Engineering"                                
 [95] "Government &amp; Politics"                                  
 [96] "Arts &amp; Culture Administration"                          
 [97] "D&amp;T Engineering"                                        
 [98] "Dutch"                                                  
 [99] "Automotive Engineering"                                 
[100] "Art &amp; Design (Critical Studies)"                        
[101] "Geology"                                                
[102] "Critical Thinking"                                      
[103] "Mathematics (Further)"                                  
[104] "D&amp;T Product Design"                                     
[105] "Additional Mathematics"                                 
[106] "Saxophone Jazz"                                         
[107] "Creative Writing"                                       
[108] "Accounting/Finance"                                     
[109] "Land Based Ops"                                         
[110] "Flute"                                                  
[111] "Guitar"                                                 
[112] "English Language &amp; Literature"                          
[113] "Logic/ Philosophy"                                      
[114] "General Studies"                                        
[115] "Environmental Science"                                  
[116] "Law"                                                    
[117] "Mathematics (Statistics)"                               
[118] "Drums"                                                  
[119] "Trumpet"                                                
[120] "Saxophone"                                              
[121] "Cello"                                                  
[122] "Music Technology"                                       
[123] "Bassoon"                                                
[124] "Clarinet"                                               
[125] "Double Bass"                                            
[126] "Drum Kit"                                               
[127] "French Horn"                                            
[128] "Horn Tenor"                                             
[129] "Piano: Solo"                                            
[130] "Trombone"                                               </code></pre>
</div>
<div class="sourceCode cell-code" id="cb91"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb91-1"><a href="#cb91-1"></a><span class="co"># also:</span></span>
<span id="cb91-2"><a href="#cb91-2"></a><span class="fu">length</span>(<span class="fu">unique</span>(results<span class="sc">$</span>Description))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 130</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>What’s the average value for free school meals (<code>FSM</code>)?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb93"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb93-1"><a href="#cb93-1"></a><span class="co"># This seems very low, it should be about ~18%, </span></span>
<span id="cb93-2"><a href="#cb93-2"></a><span class="co"># this is because it doesn't use NA values, the </span></span>
<span id="cb93-3"><a href="#cb93-3"></a><span class="co"># dfe set data for closed schools and private schools to 0(?!)</span></span>
<span id="cb93-4"><a href="#cb93-4"></a><span class="fu">mean</span>(schools<span class="sc">$</span>FSM)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0.0832842</code></pre>
</div>
</div>
<p>This seems very low, it should be about ~18%, this is because it doesn’t use NA values, the dfe set data for closed schools and private schools to 0(?!)</p>
<ol start="5" type="1">
<li>What <code>Region</code> values exist for England?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb95"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb95-1"><a href="#cb95-1"></a><span class="co"># You can see "Wales (pseudo)" here.</span></span>
<span id="cb95-2"><a href="#cb95-2"></a><span class="fu">unique</span>(schools<span class="sc">$</span>Region)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] "London"                   "South East"              
 [3] "Yorkshire and the Humber" "North West"              
 [5] "East of England"          "West Midlands"           
 [7] "North East"               "South West"              
 [9] "East Midlands"            "Wales (pseudo)"          
[11] "Not Applicable"          </code></pre>
</div>
</div>
<ol start="6" type="1">
<li><p>Load the <code>results</code> and <code>schools</code> tables and explore the data from the environment panel.</p></li>
<li><p>[Extension] What are the largest, minimum and average school cohort sizes? (hint, you’ll need to <em>add</em> two fields on the <code>schools</code> table) [Super Extension if you’ve done the vector section above] can you get R to output the name of the largest school only using vectors and R?</p></li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb97"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1"></a><span class="fu">max</span>(schools<span class="sc">$</span>NumberOfBoys <span class="sc">+</span> schools<span class="sc">$</span>NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3628</code></pre>
</div>
<div class="sourceCode cell-code" id="cb99"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb99-1"><a href="#cb99-1"></a><span class="fu">min</span>(schools<span class="sc">$</span>NumberOfBoys <span class="sc">+</span> schools<span class="sc">$</span>NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0</code></pre>
</div>
<div class="sourceCode cell-code" id="cb101"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb101-1"><a href="#cb101-1"></a><span class="fu">mean</span>(schools<span class="sc">$</span>NumberOfBoys <span class="sc">+</span> schools<span class="sc">$</span>NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 361.3546</code></pre>
</div>
<div class="sourceCode cell-code" id="cb103"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1"></a><span class="co"># don't worry, we're going to learn about much easier ways of doing this!</span></span>
<span id="cb103-2"><a href="#cb103-2"></a><span class="fu">unique</span>(</span>
<span id="cb103-3"><a href="#cb103-3"></a>  schools<span class="sc">$</span>Name[</span>
<span id="cb103-4"><a href="#cb103-4"></a>    schools<span class="sc">$</span>NumberOfBoys <span class="sc">+</span> schools<span class="sc">$</span>NumberOfGirls <span class="sc">==</span> </span>
<span id="cb103-5"><a href="#cb103-5"></a>      <span class="fu">max</span>(schools<span class="sc">$</span>NumberOfBoys <span class="sc">+</span> schools<span class="sc">$</span>NumberOfGirls, </span>
<span id="cb103-6"><a href="#cb103-6"></a>          <span class="at">na.rm =</span> <span class="cn">TRUE</span>)])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA                                 "Lycee Francais Charles de Gaulle"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb105"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb105-1"><a href="#cb105-1"></a><span class="co"># the easier way is using dplyr, see chapter 4.</span></span>
<span id="cb105-2"><a href="#cb105-2"></a>schools <span class="sc">%&gt;%</span> </span>
<span id="cb105-3"><a href="#cb105-3"></a>  <span class="fu">mutate</span>(<span class="at">total =</span> NumberOfBoys <span class="sc">+</span> NumberOfGirls) <span class="sc">%&gt;%</span> </span>
<span id="cb105-4"><a href="#cb105-4"></a>  <span class="fu">filter</span>(total <span class="sc">==</span> <span class="fu">max</span>(total, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb105-5"><a href="#cb105-5"></a>  <span class="fu">select</span>(Name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
  Name                            
  &lt;chr&gt;                           
1 Lycee Francais Charles de Gaulle</code></pre>
</div>
</div>
</div>
</section><section id="piping" class="level2" data-number="4.2"><h2 data-number="4.2" class="anchored" data-anchor-id="piping">
<span class="header-section-number">4.2</span> Piping</h2>
<section id="group-and-summarise" class="level3" data-number="4.2.1"><h3 data-number="4.2.1" class="anchored" data-anchor-id="group-and-summarise">
<span class="header-section-number">4.2.1</span> Group and summarise</h3>
<div class="question">
<ol type="1">
<li>Can you spot the <em>six</em> errors in this code:</li>
</ol>
<div class="cell">

</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb107"><pre class="sourceCode numberSource r none number-lines code-with-copy"><code class="sourceCode r"><span id="cb107-1"><a href="#cb107-1"></a>starwars <span class="sc">%&gt;%</span>  <span class="co">#1 missing pipe %&gt;%</span></span>
<span id="cb107-2"><a href="#cb107-2"></a>  <span class="fu">group_by</span>(species) <span class="sc">%&gt;%</span> <span class="co">#2 species shouldn't be in speech marks</span></span>
<span id="cb107-3"><a href="#cb107-3"></a>  <span class="fu">summarise</span>(<span class="at">avg_weight =</span> <span class="fu">mean</span>(mass, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span>
<span id="cb107-4"><a href="#cb107-4"></a>  <span class="co">#3 this is an assignment, so no need for double =</span></span>
<span id="cb107-5"><a href="#cb107-5"></a>  <span class="co">#4 lower case TRUE in na.rm needs to be upper</span></span>
<span id="cb107-6"><a href="#cb107-6"></a>  <span class="co">#5 rm.na should be na.rm</span></span>
<span id="cb107-7"><a href="#cb107-7"></a>  <span class="co">#6 trailing pipe command %&gt;% needs to be removed</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 38 x 2
   species   avg_weight
   &lt;chr&gt;          &lt;dbl&gt;
 1 Aleena          15  
 2 Besalisk       102  
 3 Cerean          82  
 4 Chagrian       NaN  
 5 Clawdite        55  
 6 Droid           69.8
 7 Dug             40  
 8 Ewok            20  
 9 Geonosian       80  
10 Gungan          74  
# ... with 28 more rows</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>Using the <code>schools</code> table, find the maximum <code>FSM</code> value for each <code>LA</code>
</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb109"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb109-2"><a href="#cb109-2"></a>  <span class="fu">group_by</span>(LA) <span class="sc">%&gt;%</span></span>
<span id="cb109-3"><a href="#cb109-3"></a>  <span class="fu">summarise</span>(<span class="at">max_FSM =</span> <span class="fu">max</span>(FSM, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 184 x 2
   LA                           max_FSM
   &lt;chr&gt;                          &lt;dbl&gt;
 1 Barking and Dagenham           0.376
 2 Barnet                         0.553
 3 Barnsley                       0.58 
 4 Bath and North East Somerset   0.549
 5 Bedford                        0.463
 6 Bexley                         0.629
 7 BFPO Overseas Establishments   0    
 8 Birmingham                     0.76 
 9 Blackburn with Darwen          0.632
10 Blackpool                      0.622
# ... with 174 more rows</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Using the <code>schools</code> table, find the mean <code>FSM</code> for each <code>OfstedRating</code>
</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb111"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb111-2"><a href="#cb111-2"></a>  <span class="fu">group_by</span>(OfstedRating) <span class="sc">%&gt;%</span></span>
<span id="cb111-3"><a href="#cb111-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_FSM =</span> <span class="fu">mean</span>(FSM, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 x 2
  OfstedRating         mean_FSM
  &lt;chr&gt;                   &lt;dbl&gt;
1 Good                   0.151 
2 Inadequate             0     
3 Outstanding            0.108 
4 Requires improvement   0.178 
5 Serious Weaknesses     0.204 
6 Special Measures       0.202 
7 &lt;NA&gt;                   0.0191</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Using the <em>schools</em> table, find the mean <code>FSM</code> for each <code>LA</code>, also grouping by whether the school is <code>Open</code>
</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb113"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a href="#cb113-2"></a>  <span class="fu">group_by</span>(LA, Open) <span class="sc">%&gt;%</span></span>
<span id="cb113-3"><a href="#cb113-3"></a>  <span class="fu">summarise</span>(<span class="at">mean_FSM =</span> <span class="fu">mean</span>(FSM, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 437 x 3
# Groups:   LA [184]
   LA                           Open   mean_FSM
   &lt;chr&gt;                        &lt;chr&gt;     &lt;dbl&gt;
 1 Barking and Dagenham         Closed  0.0150 
 2 Barking and Dagenham         Open    0.155  
 3 Barnet                       Closed  0.00905
 4 Barnet                       Open    0.102  
 5 Barnsley                     Closed  0.0218 
 6 Barnsley                     Open    0.191  
 7 Bath and North East Somerset Closed  0.0385 
 8 Bath and North East Somerset Open    0.113  
 9 Bedford                      Closed  0.0187 
10 Bedford                      Open    0.116  
# ... with 427 more rows</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>[Extension] Using the <em>results</em> table, find the total number of students entering exams by <code>School_type.</code>
</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb115"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1"></a>results <span class="sc">%&gt;%</span></span>
<span id="cb115-2"><a href="#cb115-2"></a>  <span class="co"># we have to include School_type here to avoid </span></span>
<span id="cb115-3"><a href="#cb115-3"></a>  <span class="co"># losing it in the second summarise command</span></span>
<span id="cb115-4"><a href="#cb115-4"></a>  <span class="fu">group_by</span>(ID, School_type) <span class="sc">%&gt;%</span></span>
<span id="cb115-5"><a href="#cb115-5"></a>  <span class="fu">summarise</span>(<span class="at">sch_entries =</span> <span class="fu">max</span>(Total_students)) <span class="sc">%&gt;%</span></span>
<span id="cb115-6"><a href="#cb115-6"></a>  <span class="fu">group_by</span>(School_type) <span class="sc">%&gt;%</span></span>
<span id="cb115-7"><a href="#cb115-7"></a>  <span class="fu">summarise</span>(<span class="at">total =</span> <span class="fu">sum</span>(sch_entries))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 19 x 2
   School_type  total
   &lt;chr&gt;        &lt;dbl&gt;
 1 AC          103116
 2 ACC         271197
 3 ACCS          1734
 4 ACS            578
 5 CTC            578
 6 CY           64752
 7 CYS           3334
 8 F             9021
 9 FD           31793
10 FDS            733
11 FESI          1100
12 FS             121
13 FSS           1223
14 FUTC          3733
15 IND          47727
16 INDSPEC       2246
17 NMSS           275
18 VA           37253
19 VC            5588</code></pre>
</div>
</div>
</div>
</section><section id="select-filter-and-mutate" class="level3" data-number="4.2.2"><h3 data-number="4.2.2" class="anchored" data-anchor-id="select-filter-and-mutate">
<span class="header-section-number">4.2.2</span> Select, filter and mutate</h3>
<div class="question">
<p>Adjust the above code to find all schools where over 60% of students take German, or another subject of your choice.</p>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb117"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1"></a><span class="co"># we can find results for German OR Italian</span></span>
<span id="cb117-2"><a href="#cb117-2"></a>results <span class="sc">%&gt;%</span> </span>
<span id="cb117-3"><a href="#cb117-3"></a>  <span class="fu">filter</span>(Description <span class="sc">==</span> <span class="st">"German"</span> <span class="sc">|</span> Description <span class="sc">==</span> <span class="st">"Italian"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-4"><a href="#cb117-4"></a>  <span class="fu">filter</span>(Grade <span class="sc">==</span> <span class="st">"Total number entered"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb117-5"><a href="#cb117-5"></a>  <span class="fu">select</span>(ID, School, Total_students,Description, Entries) <span class="sc">%&gt;%</span></span>
<span id="cb117-6"><a href="#cb117-6"></a>  <span class="fu">mutate</span>(<span class="at">per =</span> Entries<span class="sc">/</span>Total_students) <span class="sc">%&gt;%</span></span>
<span id="cb117-7"><a href="#cb117-7"></a>  <span class="fu">filter</span>(per <span class="sc">&gt;</span> <span class="fl">0.6</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="question">
<ol type="1">
<li>Predict what this code does:</li>
</ol>
<p>It finds the average student size of pupil referral units by gender of school and gender of student.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a>schools <span class="sc">%&gt;%</span> </span>
<span id="cb118-2"><a href="#cb118-2"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-3"><a href="#cb118-3"></a>  <span class="fu">filter</span>(TypeOfEstablishment <span class="sc">==</span> <span class="st">"Pupil referral unit"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb118-4"><a href="#cb118-4"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">%&gt;%</span></span>
<span id="cb118-5"><a href="#cb118-5"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb118-6"><a href="#cb118-6"></a>            <span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys <span class="sc">+</span> NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb118-7"><a href="#cb118-7"></a>            <span class="at">average_boys =</span> <span class="fu">mean</span>(NumberOfBoys, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb118-8"><a href="#cb118-8"></a>            <span class="at">average_girls =</span> <span class="fu">mean</span>(NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 x 5
  Gender     n average average_boys average_girls
  &lt;chr&gt;  &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
1 Girls      1    15            0            15  
2 Mixed    202    50.4         36.2          14.2</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>What are the <em>six</em> errors in this code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a>schools</span>
<span id="cb120-2"><a href="#cb120-2"></a>  <span class="fu">filter</span>(<span class="at">Gender =</span> <span class="st">"boys"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb120-3"><a href="#cb120-3"></a>  <span class="fu">fitler</span>(TypeOfEstablishment <span class="sc">==</span> Free schools) <span class="sc">%&gt;%</span></span>
<span id="cb120-4"><a href="#cb120-4"></a>  <span class="fu">summarise</span>(<span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>schools <span class="sc">%&gt;%</span> <span class="co">#1 missing pipe</span></span>
<span id="cb121-2"><a href="#cb121-2"></a>  <span class="co">#2 double == for comparison; #3 capital B in Boys</span></span>
<span id="cb121-3"><a href="#cb121-3"></a>  <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">"Boys"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb121-4"><a href="#cb121-4"></a>  <span class="co">#4 filter rather than fitler; #5 speech marks around "Free schools"</span></span>
<span id="cb121-5"><a href="#cb121-5"></a>  <span class="fu">filter</span>(TypeOfEstablishment <span class="sc">==</span> <span class="st">"Free schools"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb121-6"><a href="#cb121-6"></a>  <span class="fu">summarise</span>(<span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co">#6 missing na.rm = TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
  average
    &lt;dbl&gt;
1    491.</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Display (<code>Select</code>) only the <code>ID</code>, <code>LA</code>, <code>Gender</code>, <code>OfstedRating</code> from a school</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="#cb123-2"></a>  <span class="fu">select</span>(ID, LA, Gender, OfstedRating)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48,354 x 4
       ID LA             Gender OfstedRating
    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;       
 1 100000 City of London Mixed  Outstanding 
 2 100001 City of London Girls  &lt;NA&gt;        
 3 100002 City of London Mixed  &lt;NA&gt;        
 4 100003 City of London Boys   &lt;NA&gt;        
 5 100004 Camden         Mixed  &lt;NA&gt;        
 6 100005 Camden         Mixed  Outstanding 
 7 100006 Camden         Mixed  Good        
 8 100007 Camden         Mixed  Good        
 9 100008 Camden         Mixed  Good        
10 100009 Camden         Mixed  Good        
# ... with 48,344 more rows</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Show all the Open schools that have exactly <code>400</code> girls.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb125-2"><a href="#cb125-2"></a>  <span class="fu">filter</span>(NumberOfGirls <span class="sc">==</span> <span class="dv">400</span>, </span>
<span id="cb125-3"><a href="#cb125-3"></a>         Open <span class="sc">==</span> <span class="st">"Open"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 19
      ID LA           Name  TypeOfEstablish~ EstablishmentGr~ Open  Phase Gender
   &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 
1 103858 Dudley       The ~ Community school Local authority~ Open  Seco~ Mixed 
2 104835 St. Helens   St C~ Voluntary aided~ Local authority~ Open  Seco~ Mixed 
3 106271 Tameside     St T~ Voluntary aided~ Local authority~ Open  Seco~ Mixed 
4 119835 Lancashire   Kirk~ Other independe~ Independent sch~ Open  Not ~ Mixed 
5 135313 Rochdale     St A~ Academy sponsor~ Academies        Open  Seco~ Mixed 
6 137453 North Linco~ The ~ Academy convert~ Academies        Open  Seco~ Mixed 
7 142570 Birmingham   High~ Academy sponsor~ Academies        Open  Prim~ Mixed 
8 142853 North Somer~ St K~ Academy convert~ Academies        Open  Seco~ Mixed 
# ... with 11 more variables: Religion &lt;chr&gt;, AdmissionsPolicy &lt;chr&gt;,
#   NumberOfBoys &lt;dbl&gt;, NumberOfGirls &lt;dbl&gt;, FSM &lt;dbl&gt;, OfstedLastInsp &lt;dttm&gt;,
#   Postcode &lt;chr&gt;, Region &lt;chr&gt;, Easting &lt;dbl&gt;, Northing &lt;dbl&gt;,
#   OfstedRating &lt;chr&gt;</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Filter all the schools that got <code>Outstanding</code> as an <code>OfstedRating</code>, display the <code>ID</code>, <code>Name</code>, <code>FSM</code> and <code>TypeOfEstablishment</code>, and arrange them by descending <code>FSM</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb127-2"><a href="#cb127-2"></a>  <span class="fu">filter</span>(OfstedRating <span class="sc">==</span> <span class="st">"Outstanding"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb127-3"><a href="#cb127-3"></a>  <span class="fu">select</span>(ID, Name, FSM, TypeOfEstablishment) <span class="sc">%&gt;%</span></span>
<span id="cb127-4"><a href="#cb127-4"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(FSM))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,586 x 4
       ID Name                                          FSM TypeOfEstablishment 
    &lt;dbl&gt; &lt;chr&gt;                                       &lt;dbl&gt; &lt;chr&gt;               
 1 135010 Sutton Tuition and Reintegration Service    1     Pupil referral unit 
 2 139541 Courtyard AP Academy                        0.929 Academy alternative~
 3 100643 Turney Primary and Secondary Special School 0.875 Foundation special ~
 4 131598 Ian Mikardo School                          0.811 Community special s~
 5 107589 William Henry Smith School                  0.778 Non-maintained spec~
 6 102957 The Limes College                           0.759 Pupil referral unit 
 7 115450 Wells Park School                           0.736 Community special s~
 8 135558 Hawkswood Primary PRU                       0.692 Pupil referral unit 
 9 141582 St Silas Church of England Primary School   0.692 Academy converter   
10 100469 Samuel Rhodes MLD School                    0.677 Community special s~
# ... with 4,576 more rows</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Count the number (<code>n()</code>) of <code>Open</code> schools that have an <code>FSM</code> number of over <code>0.95</code> (You don’t have to use <code>summarise</code>, but it helps)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb129-2"><a href="#cb129-2"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-3"><a href="#cb129-3"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb129-4"><a href="#cb129-4"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
      n
  &lt;int&gt;
1     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a><span class="co"># alternatively:</span></span>
<span id="cb131-2"><a href="#cb131-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb131-3"><a href="#cb131-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-4"><a href="#cb131-4"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb131-5"><a href="#cb131-5"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
      n
  &lt;int&gt;
1     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a><span class="co"># alternatively:</span></span>
<span id="cb133-2"><a href="#cb133-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb133-3"><a href="#cb133-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-4"><a href="#cb133-4"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb133-5"><a href="#cb133-5"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<ol start="7" type="1">
<li>How many <code>Open</code> schools in each (<code>group_by</code>) <code>Region</code> have more than <code>2000</code> students?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a><span class="co"># the order of mutate and filter doesn't matter here,</span></span>
<span id="cb135-2"><a href="#cb135-2"></a><span class="co"># but group_by and summarise do!</span></span>
<span id="cb135-3"><a href="#cb135-3"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb135-4"><a href="#cb135-4"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb135-5"><a href="#cb135-5"></a>  <span class="fu">mutate</span>(<span class="at">total_students =</span> NumberOfBoys <span class="sc">+</span> NumberOfGirls) <span class="sc">%&gt;%</span></span>
<span id="cb135-6"><a href="#cb135-6"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>,</span>
<span id="cb135-7"><a href="#cb135-7"></a>         total_students <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb135-8"><a href="#cb135-8"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 2
  Region                       n
  &lt;chr&gt;                    &lt;int&gt;
1 East Midlands                5
2 East of England              3
3 London                      12
4 North East                   1
5 South East                   9
6 South West                   3
7 West Midlands                2
8 Yorkshire and the Humber     6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="co"># alternatively, we can do without the mutate: </span></span>
<span id="cb137-2"><a href="#cb137-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb137-3"><a href="#cb137-3"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb137-4"><a href="#cb137-4"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>,</span>
<span id="cb137-5"><a href="#cb137-5"></a>         NumberOfBoys <span class="sc">+</span> NumberOfGirls <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb137-6"><a href="#cb137-6"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 2
  Region                       n
  &lt;chr&gt;                    &lt;int&gt;
1 East Midlands                5
2 East of England              3
3 London                      12
4 North East                   1
5 South East                   9
6 South West                   3
7 West Midlands                2
8 Yorkshire and the Humber     6</code></pre>
</div>
</div>
<ol start="8" type="1">
<li>Count (<code>summarise</code>) the number of schools, grouped as both <code>Open</code> and <code>Closed</code> under each <code>OfstedRating</code>, make the <code>Open</code> results appear at the top of the table. Output the result to an object and explore it in the Environment area.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="#cb139-2"></a>  <span class="fu">group_by</span>(OfstedRating, Open) <span class="sc">%&gt;%</span></span>
<span id="cb139-3"><a href="#cb139-3"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb139-4"><a href="#cb139-4"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb139-5"><a href="#cb139-5"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Open))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 x 3
   OfstedRating         Open                            n
   &lt;chr&gt;                &lt;chr&gt;                       &lt;int&gt;
 1 &lt;NA&gt;                 Proposed to open               48
 2 Good                 Open, but proposed to close     4
 3 Outstanding          Open, but proposed to close     1
 4 Requires improvement Open, but proposed to close    16
 5 Serious Weaknesses   Open, but proposed to close    16
 6 Special Measures     Open, but proposed to close    21
 7 &lt;NA&gt;                 Open, but proposed to close     2
 8 Good                 Open                        13915
 9 Inadequate           Open                          107
10 Outstanding          Open                         3511
# ... with 11 more rows</code></pre>
</div>
</div>
<ol start="9" type="1">
<li>[Extension] What’s the average <code>FSM</code> rating for each <code>Gender</code> of school in each <code>Region</code>? Arrange the results so the most impoverished area appears first.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb141-2"><a href="#cb141-2"></a>  <span class="fu">group_by</span>(Region, Gender) <span class="sc">%&gt;%</span></span>
<span id="cb141-3"><a href="#cb141-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb141-4"><a href="#cb141-4"></a>  <span class="fu">summarise</span>(<span class="at">mean_FSM =</span> <span class="fu">mean</span>(FSM, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb141-5"><a href="#cb141-5"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb141-6"><a href="#cb141-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_FSM))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 x 3
   Region                   Gender mean_FSM
   &lt;chr&gt;                    &lt;chr&gt;     &lt;dbl&gt;
 1 North East               Mixed     0.215
 2 North West               Mixed     0.173
 3 London                   Mixed     0.162
 4 West Midlands            Mixed     0.161
 5 Yorkshire and the Humber Mixed     0.159
 6 West Midlands            Boys      0.139
 7 East Midlands            Mixed     0.135
 8 South West               Boys      0.134
 9 North East               Boys      0.124
10 South West               Mixed     0.122
# ... with 38 more rows</code></pre>
</div>
</div>
</div>
</section><section id="renaming-columns" class="level3" data-number="4.2.3"><h3 data-number="4.2.3" class="anchored" data-anchor-id="renaming-columns">
<span class="header-section-number">4.2.3</span> Renaming columns</h3>
</section><section id="arranging-results" class="level3" data-number="4.2.4"><h3 data-number="4.2.4" class="anchored" data-anchor-id="arranging-results">
<span class="header-section-number">4.2.4</span> Arranging results</h3>
</section><section id="questions" class="level3" data-number="4.2.5"><h3 data-number="4.2.5" class="anchored" data-anchor-id="questions">
<span class="header-section-number">4.2.5</span> Questions</h3>
<div class="question">
<ol type="1">
<li>Predict what this code does:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a>schools <span class="sc">%&gt;%</span> </span>
<span id="cb143-2"><a href="#cb143-2"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-3"><a href="#cb143-3"></a>  <span class="fu">filter</span>(TypeOfEstablishment <span class="sc">==</span> <span class="st">"Pupil referral unit"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb143-4"><a href="#cb143-4"></a>  <span class="fu">group_by</span>(Gender) <span class="sc">%&gt;%</span></span>
<span id="cb143-5"><a href="#cb143-5"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>(), </span>
<span id="cb143-6"><a href="#cb143-6"></a>            <span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys <span class="sc">+</span> NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb143-7"><a href="#cb143-7"></a>            <span class="at">average_boys =</span> <span class="fu">mean</span>(NumberOfBoys, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), </span>
<span id="cb143-8"><a href="#cb143-8"></a>            <span class="at">average_girls =</span> <span class="fu">mean</span>(NumberOfGirls, <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 x 5
  Gender     n average average_boys average_girls
  &lt;chr&gt;  &lt;int&gt;   &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
1 Girls      1    15            0            15  
2 Mixed    202    50.4         36.2          14.2</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>What are the 6 errors in this code:</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a>schools</span>
<span id="cb145-2"><a href="#cb145-2"></a>  <span class="fu">filter</span>(<span class="at">Gender =</span> <span class="st">"boys"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="#cb145-3"></a>  <span class="fu">fitler</span>(TypeOfEstablishment <span class="sc">==</span> Free schools) <span class="sc">%&gt;%</span></span>
<span id="cb145-4"><a href="#cb145-4"></a>  <span class="fu">summarise</span>(<span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb146"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb146-1"><a href="#cb146-1"></a>schools <span class="sc">%&gt;%</span> <span class="co">#1 missing pipe</span></span>
<span id="cb146-2"><a href="#cb146-2"></a>  <span class="co">#2 double == for comparison; #3 capital B in Boys</span></span>
<span id="cb146-3"><a href="#cb146-3"></a>  <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">"Boys"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb146-4"><a href="#cb146-4"></a>  <span class="co">#4 filter rather than fitler; #5 speech marks around "Free schools"</span></span>
<span id="cb146-5"><a href="#cb146-5"></a>  <span class="fu">filter</span>(TypeOfEstablishment <span class="sc">==</span> <span class="st">"Free schools"</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb146-6"><a href="#cb146-6"></a>  <span class="fu">summarise</span>(<span class="at">average =</span> <span class="fu">mean</span>(NumberOfBoys, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)) <span class="co">#6 missing na.rm = TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
  average
    &lt;dbl&gt;
1    491.</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>Display (<code>Select</code>) only the <code>ID</code>, <code>LA</code>, <code>Gender</code>, <code>OfstedRating</code> from a school</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb148"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb148-1"><a href="#cb148-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href="#cb148-2"></a>  <span class="fu">select</span>(ID, LA, Gender, OfstedRating)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48,354 x 4
       ID LA             Gender OfstedRating
    &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt;  &lt;chr&gt;       
 1 100000 City of London Mixed  Outstanding 
 2 100001 City of London Girls  &lt;NA&gt;        
 3 100002 City of London Mixed  &lt;NA&gt;        
 4 100003 City of London Boys   &lt;NA&gt;        
 5 100004 Camden         Mixed  &lt;NA&gt;        
 6 100005 Camden         Mixed  Outstanding 
 7 100006 Camden         Mixed  Good        
 8 100007 Camden         Mixed  Good        
 9 100008 Camden         Mixed  Good        
10 100009 Camden         Mixed  Good        
# ... with 48,344 more rows</code></pre>
</div>
</div>
<ol start="4" type="1">
<li>Show all the Open schools that have exactly <code>400</code> girls.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb150"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb150-1"><a href="#cb150-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb150-2"><a href="#cb150-2"></a>  <span class="fu">filter</span>(NumberOfGirls <span class="sc">==</span> <span class="dv">400</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 x 19
       ID LA          Name  TypeOfEstablish~ EstablishmentGr~ Open  Phase Gender
    &lt;dbl&gt; &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; 
 1 101857 Liverpool   The ~ Academy sponsor~ Academies        Clos~ Seco~ Mixed 
 2 103858 Dudley      The ~ Community school Local authority~ Open  Seco~ Mixed 
 3 104835 St. Helens  St C~ Voluntary aided~ Local authority~ Open  Seco~ Mixed 
 4 106271 Tameside    St T~ Voluntary aided~ Local authority~ Open  Seco~ Mixed 
 5 106947 Rotherham   Clif~ Community school Local authority~ Clos~ Seco~ Mixed 
 6 119835 Lancashire  Kirk~ Other independe~ Independent sch~ Open  Not ~ Mixed 
 7 135313 Rochdale    St A~ Academy sponsor~ Academies        Open  Seco~ Mixed 
 8 135622 Sunderland  Acad~ Academy sponsor~ Academies        Clos~ All-~ Mixed 
 9 137453 North Linc~ The ~ Academy convert~ Academies        Open  Seco~ Mixed 
10 142570 Birmingham  High~ Academy sponsor~ Academies        Open  Prim~ Mixed 
11 142853 North Some~ St K~ Academy convert~ Academies        Open  Seco~ Mixed 
# ... with 11 more variables: Religion &lt;chr&gt;, AdmissionsPolicy &lt;chr&gt;,
#   NumberOfBoys &lt;dbl&gt;, NumberOfGirls &lt;dbl&gt;, FSM &lt;dbl&gt;, OfstedLastInsp &lt;dttm&gt;,
#   Postcode &lt;chr&gt;, Region &lt;chr&gt;, Easting &lt;dbl&gt;, Northing &lt;dbl&gt;,
#   OfstedRating &lt;chr&gt;</code></pre>
</div>
</div>
<ol start="5" type="1">
<li>Filter all the schools that got <code>Outstanding</code> as an <code>OfstedRating</code>, display the <code>ID</code>, <code>Name</code>, <code>FSM</code> and <code>TypeOfEstablishment</code>, and arrange them by descending <code>FSM</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb152"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb152-1"><a href="#cb152-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb152-2"><a href="#cb152-2"></a>  <span class="fu">filter</span>(OfstedRating <span class="sc">==</span> <span class="st">"Outstanding"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb152-3"><a href="#cb152-3"></a>  <span class="fu">select</span>(ID, Name, FSM, TypeOfEstablishment) <span class="sc">%&gt;%</span></span>
<span id="cb152-4"><a href="#cb152-4"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(FSM))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4,586 x 4
       ID Name                                          FSM TypeOfEstablishment 
    &lt;dbl&gt; &lt;chr&gt;                                       &lt;dbl&gt; &lt;chr&gt;               
 1 135010 Sutton Tuition and Reintegration Service    1     Pupil referral unit 
 2 139541 Courtyard AP Academy                        0.929 Academy alternative~
 3 100643 Turney Primary and Secondary Special School 0.875 Foundation special ~
 4 131598 Ian Mikardo School                          0.811 Community special s~
 5 107589 William Henry Smith School                  0.778 Non-maintained spec~
 6 102957 The Limes College                           0.759 Pupil referral unit 
 7 115450 Wells Park School                           0.736 Community special s~
 8 135558 Hawkswood Primary PRU                       0.692 Pupil referral unit 
 9 141582 St Silas Church of England Primary School   0.692 Academy converter   
10 100469 Samuel Rhodes MLD School                    0.677 Community special s~
# ... with 4,576 more rows</code></pre>
</div>
</div>
<ol start="6" type="1">
<li>Count the number (<code>n()</code>) of <code>Open</code> schools that have an <code>FSM</code> number of over <code>0.95</code> (You don’t have to use <code>summarise</code>, but it helps)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb154"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb154-1"><a href="#cb154-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb154-2"><a href="#cb154-2"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-3"><a href="#cb154-3"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb154-4"><a href="#cb154-4"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
      n
  &lt;int&gt;
1     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb156"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb156-1"><a href="#cb156-1"></a><span class="co"># alternatively:</span></span>
<span id="cb156-2"><a href="#cb156-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb156-3"><a href="#cb156-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb156-4"><a href="#cb156-4"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb156-5"><a href="#cb156-5"></a>  <span class="fu">count</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
      n
  &lt;int&gt;
1     7</code></pre>
</div>
<div class="sourceCode cell-code" id="cb158"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb158-1"><a href="#cb158-1"></a><span class="co"># alternatively:</span></span>
<span id="cb158-2"><a href="#cb158-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb158-3"><a href="#cb158-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb158-4"><a href="#cb158-4"></a>  <span class="fu">filter</span>(FSM <span class="sc">&gt;</span> <span class="fl">0.95</span>) <span class="sc">%&gt;%</span></span>
<span id="cb158-5"><a href="#cb158-5"></a>  <span class="fu">nrow</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 7</code></pre>
</div>
</div>
<ol start="7" type="1">
<li>How many <code>Open</code> schools in each (<code>group_by</code>) <code>Region</code> have more than <code>2000</code> students?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb160"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb160-1"><a href="#cb160-1"></a><span class="co"># the order of mutate and filter doesn't matter here,</span></span>
<span id="cb160-2"><a href="#cb160-2"></a><span class="co"># but group_by and summarise do!</span></span>
<span id="cb160-3"><a href="#cb160-3"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb160-4"><a href="#cb160-4"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb160-5"><a href="#cb160-5"></a>  <span class="fu">mutate</span>(<span class="at">total_students =</span> NumberOfBoys <span class="sc">+</span> NumberOfGirls) <span class="sc">%&gt;%</span></span>
<span id="cb160-6"><a href="#cb160-6"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>,</span>
<span id="cb160-7"><a href="#cb160-7"></a>         total_students <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb160-8"><a href="#cb160-8"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 2
  Region                       n
  &lt;chr&gt;                    &lt;int&gt;
1 East Midlands                5
2 East of England              3
3 London                      12
4 North East                   1
5 South East                   9
6 South West                   3
7 West Midlands                2
8 Yorkshire and the Humber     6</code></pre>
</div>
<div class="sourceCode cell-code" id="cb162"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb162-1"><a href="#cb162-1"></a><span class="co"># alternatively, we can do without the mutate: </span></span>
<span id="cb162-2"><a href="#cb162-2"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb162-3"><a href="#cb162-3"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb162-4"><a href="#cb162-4"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>,</span>
<span id="cb162-5"><a href="#cb162-5"></a>         NumberOfBoys <span class="sc">+</span> NumberOfGirls <span class="sc">&gt;</span> <span class="dv">2000</span>) <span class="sc">%&gt;%</span></span>
<span id="cb162-6"><a href="#cb162-6"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 x 2
  Region                       n
  &lt;chr&gt;                    &lt;int&gt;
1 East Midlands                5
2 East of England              3
3 London                      12
4 North East                   1
5 South East                   9
6 South West                   3
7 West Midlands                2
8 Yorkshire and the Humber     6</code></pre>
</div>
</div>
<ol start="8" type="1">
<li>Count (<code>summarise</code>) the number of schools, grouped as both <code>Open</code> and <code>Closed</code> under each <code>OfstedRating</code>, make the <code>Open</code> results appear at the top of the table. Output the result to an object and explore it in the Environment area.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb164"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb164-1"><a href="#cb164-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="#cb164-2"></a>  <span class="fu">group_by</span>(OfstedRating, Open) <span class="sc">%&gt;%</span></span>
<span id="cb164-3"><a href="#cb164-3"></a>  <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb164-4"><a href="#cb164-4"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb164-5"><a href="#cb164-5"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Open))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'OfstedRating'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 x 3
   OfstedRating         Open                            n
   &lt;chr&gt;                &lt;chr&gt;                       &lt;int&gt;
 1 &lt;NA&gt;                 Proposed to open               48
 2 Good                 Open, but proposed to close     4
 3 Outstanding          Open, but proposed to close     1
 4 Requires improvement Open, but proposed to close    16
 5 Serious Weaknesses   Open, but proposed to close    16
 6 Special Measures     Open, but proposed to close    21
 7 &lt;NA&gt;                 Open, but proposed to close     2
 8 Good                 Open                        13915
 9 Inadequate           Open                          107
10 Outstanding          Open                         3511
# ... with 11 more rows</code></pre>
</div>
</div>
<ol start="9" type="1">
<li>[Extension] What’s the average <code>FSM</code> rating for each <code>Gender</code> of school in each <code>Region</code>? <code>arrange</code> the results so the most impoverished area appears first.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a>schools <span class="sc">%&gt;%</span></span>
<span id="cb167-2"><a href="#cb167-2"></a>  <span class="fu">group_by</span>(Region, Gender) <span class="sc">%&gt;%</span></span>
<span id="cb167-3"><a href="#cb167-3"></a>  <span class="fu">filter</span>(Open <span class="sc">==</span> <span class="st">"Open"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb167-4"><a href="#cb167-4"></a>  <span class="fu">summarise</span>(<span class="at">mean_FSM =</span> <span class="fu">mean</span>(FSM, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb167-5"><a href="#cb167-5"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb167-6"><a href="#cb167-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mean_FSM))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>`summarise()` has grouped output by 'Region'. You can override using the
`.groups` argument.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 48 x 3
   Region                   Gender mean_FSM
   &lt;chr&gt;                    &lt;chr&gt;     &lt;dbl&gt;
 1 North East               Mixed     0.215
 2 North West               Mixed     0.173
 3 London                   Mixed     0.162
 4 West Midlands            Mixed     0.161
 5 Yorkshire and the Humber Mixed     0.159
 6 West Midlands            Boys      0.139
 7 East Midlands            Mixed     0.135
 8 South West               Boys      0.134
 9 North East               Boys      0.124
10 South West               Mixed     0.122
# ... with 38 more rows</code></pre>
</div>
</div>
</div>
</section></section><section id="joing-tables" class="level2" data-number="4.3"><h2 data-number="4.3" class="anchored" data-anchor-id="joing-tables">
<span class="header-section-number">4.3</span> Joing tables</h2>
</section><section id="saving-data" class="level2" data-number="4.4"><h2 data-number="4.4" class="anchored" data-anchor-id="saving-data">
<span class="header-section-number">4.4</span> Saving data</h2>
</section><section id="summary-questions-1" class="level2" data-number="4.5"><h2 data-number="4.5" class="anchored" data-anchor-id="summary-questions-1">
<span class="header-section-number">4.5</span> Summary questions</h2>
<div class="question">
<ol type="1">
<li>Work out how many schools are in each country <code>CNTRY</code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1"></a>TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb170-2"><a href="#cb170-2"></a>  <span class="fu">group_by</span>(CNTRY) <span class="sc">%&gt;%</span></span>
<span id="cb170-3"><a href="#cb170-3"></a>  <span class="fu">summarise</span>(<span class="at">n =</span> <span class="fu">n</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 x 2
   CNTRY     n
   &lt;chr&gt; &lt;int&gt;
 1 ENG     136
 2 FIN     154
 3 FRA     150
 4 HKG     136
 5 IRL     149
 6 ISR     157
 7 NOR     157
 8 RUS     204
 9 SWE     150
10 TUR     181
11 USA     273</code></pre>
</div>
</div>
<ol start="2" type="1">
<li>For only those headteachers that have a masters or equivalent degree qualification (<code>BCBG21B</code>), what is the average number of years they have been a principal (<code>BCBG18</code>)?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1"></a>TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb172-2"><a href="#cb172-2"></a>  <span class="fu">filter</span>(BCBG21B <span class="sc">==</span> <span class="st">"Yes"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb172-3"><a href="#cb172-3"></a>  <span class="fu">summarise</span>(<span class="at">avg_years =</span> <span class="fu">mean</span>(BCBG18, <span class="at">na.rm=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 1
  avg_years
      &lt;dbl&gt;
1        NA</code></pre>
</div>
</div>
<ol start="3" type="1">
<li>For the students in each country: What is the average and median instructional time in hours (calculated from <code>BCBG06B</code>), in a typical day? Can you arrange the results so we find the hardest working country? HINT, you might want to mutate <code>BCBG06B</code> to make it <code><a href="https://rdrr.io/r/base/numeric.html">as.numeric()</a></code>.</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1"></a>TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb174-2"><a href="#cb174-2"></a>  <span class="fu">group_by</span>(CNTRY) <span class="sc">%&gt;%</span></span>
<span id="cb174-3"><a href="#cb174-3"></a>  <span class="fu">mutate</span>(<span class="at">BCBG06B =</span> <span class="fu">as.numeric</span>(BCBG06B)) <span class="sc">%&gt;%</span></span>
<span id="cb174-4"><a href="#cb174-4"></a>  <span class="fu">summarise</span>(<span class="at">mean_teaching =</span> <span class="fu">mean</span>(BCBG06B<span class="sc">/</span><span class="dv">60</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>),</span>
<span id="cb174-5"><a href="#cb174-5"></a>            <span class="at">median_teaching =</span> <span class="fu">median</span>(BCBG06B<span class="sc">/</span><span class="dv">60</span>, <span class="at">na.rm=</span><span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb174-6"><a href="#cb174-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(median_teaching))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 11 x 3
   CNTRY mean_teaching median_teaching
   &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;
 1 FRA            6.27            6.42
 2 USA            6.39            6.38
 3 IRL            5.83            6   
 4 HKG            5.57            5.5 
 5 ISR            5.40            5.25
 6 ENG            5.20            5   
 7 SWE            5.15            5   
 8 TUR            5.33            4.67
 9 NOR            4.77            4.6 
10 FIN            4.81            4.5 
11 RUS            4.53            4.5 </code></pre>
</div>
</div>
<ol start="4" type="1">
<li>For each country, what percentage of their schools have students with a <code>Very high</code> desire to do well in school (<code>BCBG14I</code>)? One of the countries is missing, why?</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1"></a>TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb176-2"><a href="#cb176-2"></a>  <span class="fu">group_by</span>(CNTRY) <span class="sc">%&gt;%</span></span>
<span id="cb176-3"><a href="#cb176-3"></a>  <span class="fu">mutate</span>(<span class="at">total_schools =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb176-4"><a href="#cb176-4"></a>  <span class="fu">filter</span>(BCBG14I <span class="sc">==</span> <span class="st">"Very high"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb176-5"><a href="#cb176-5"></a>  <span class="fu">summarise</span>(<span class="at">do_well =</span> <span class="dv">100</span><span class="sc">*</span>(<span class="fu">n</span>() <span class="sc">/</span> <span class="fu">unique</span>(total_schools)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 x 2
   CNTRY do_well
   &lt;chr&gt;   &lt;dbl&gt;
 1 ENG     15.4 
 2 FIN      3.25
 3 FRA      7.33
 4 HKG      7.35
 5 IRL     17.4 
 6 ISR      8.92
 7 NOR      7.64
 8 SWE     12.7 
 9 TUR      8.29
10 USA      8.06</code></pre>
</div>
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a><span class="co"># we can also work out the percentage for all the responses to this question</span></span>
<span id="cb178-2"><a href="#cb178-2"></a>TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb178-3"><a href="#cb178-3"></a>  <span class="fu">group_by</span>(CNTRY) <span class="sc">%&gt;%</span></span>
<span id="cb178-4"><a href="#cb178-4"></a>  <span class="fu">mutate</span>(<span class="at">total_schools =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb178-5"><a href="#cb178-5"></a>  <span class="fu">group_by</span>(CNTRY, BCBG14I) <span class="sc">%&gt;%</span></span>
<span id="cb178-6"><a href="#cb178-6"></a>  <span class="fu">summarise</span>(<span class="at">do_well =</span> <span class="dv">100</span><span class="sc">*</span>(<span class="fu">n</span>() <span class="sc">/</span> <span class="fu">unique</span>(total_schools)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 54 x 3
# Groups:   CNTRY [11]
   CNTRY BCBG14I   do_well
   &lt;chr&gt; &lt;chr&gt;       &lt;dbl&gt;
 1 ENG   High       27.2  
 2 ENG   Low         2.21 
 3 ENG   Medium     21.3  
 4 ENG   Very high  15.4  
 5 ENG   &lt;NA&gt;       33.8  
 6 FIN   High       43.5  
 7 FIN   Low         0.649
 8 FIN   Medium     51.9  
 9 FIN   Very high   3.25 
10 FIN   &lt;NA&gt;        0.649
# ... with 44 more rows</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a><span class="co"># Russia is missing as there were no schools that gave "Very high" as a response to BCBG14I.</span></span>
<span id="cb180-2"><a href="#cb180-2"></a><span class="co"># You can work this out by using the set difference command setdiff:</span></span>
<span id="cb180-3"><a href="#cb180-3"></a>very_high <span class="ot">&lt;-</span> TIMSS <span class="sc">%&gt;%</span> </span>
<span id="cb180-4"><a href="#cb180-4"></a>  <span class="fu">group_by</span>(CNTRY) <span class="sc">%&gt;%</span></span>
<span id="cb180-5"><a href="#cb180-5"></a>  <span class="fu">mutate</span>(<span class="at">total_schools =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb180-6"><a href="#cb180-6"></a>  <span class="fu">filter</span>(BCBG14I <span class="sc">==</span> <span class="st">"Very high"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb180-7"><a href="#cb180-7"></a>  <span class="fu">summarise</span>(<span class="at">do_well =</span> <span class="dv">100</span><span class="sc">*</span>(<span class="fu">n</span>() <span class="sc">/</span> <span class="fu">unique</span>(total_schools)))</span>
<span id="cb180-8"><a href="#cb180-8"></a></span>
<span id="cb180-9"><a href="#cb180-9"></a><span class="fu">setdiff</span>(<span class="fu">unique</span>(TIMSS<span class="sc">$</span>CNTRY), <span class="fu">unique</span>(very_high<span class="sc">$</span>CNTRY))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "RUS"</code></pre>
</div>
</div>
<ol start="5" type="1">
<li><p>Save the results of one of the above questions using <code><a href="https://rdrr.io/r/utils/write.table.html">write.csv()</a></code>.</p></li>
<li><p>[EXTENSION] explore the data for “To what degree is each of the following a problem among eighth grade students in your school?” <code>BCBG16E</code> - Profanity; <code>BCBG16J</code> - Intimidation or verbal abuse of teachers or staff.</p></li>
</ol>
</div>
</section></section><section id="graphing" class="level1" data-number="5"><h1 data-number="5">
<span class="header-section-number">5</span> Graphing</h1>
<section id="exporting-plots" class="level2" data-number="5.1"><h2 data-number="5.1" class="anchored" data-anchor-id="exporting-plots">
<span class="header-section-number">5.1</span> exporting plots</h2>
<div class="cell">

</div>
</section></section><section id="statistical-analysis-in-r" class="level1" data-number="6"><h1 data-number="6">
<span class="header-section-number">6</span> Statistical analysis in R</h1>
<p>geom_smooth</p>
<p>geom_box</p>
</section><section id="pretty-tables" class="level1" data-number="7"><h1 data-number="7">
<span class="header-section-number">7</span> Pretty tables</h1>
</section></main><!-- /main column --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>